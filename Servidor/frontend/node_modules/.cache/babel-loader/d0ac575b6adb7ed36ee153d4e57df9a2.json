{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projetos\\\\ProjetoCasa\\\\frontend\\\\src\\\\components\\\\Login.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport '../styles/App.css';\nimport Cookies from 'js-cookie';\nimport 'antd/dist/antd.css';\nimport '../styles/index.css';\nimport { Form, Input, Button, Checkbox } from 'antd';\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\nimport { Link } from 'react-router-dom';\n\nclass LoginForm extends Component {\n  constructor(props) {\n    super(props);\n\n    this.clear = () => {\n      this.setState({\n        email: \"\",\n        password: \"\"\n      });\n    };\n\n    this.state = {\n      email: '',\n      password: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    console.log(this.state);\n  } //Get input\n\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n    console.log(this.setState);\n  } //Submit to log in\n\n\n  handleSubmit(event) {\n    event.preventDefault();\n    const request = {\n      email: this.state.email,\n      password: this.state.password\n    };\n    const history = this.props.history;\n    axios.post('http://localhost:3000/api/authenticate', request, {\n      method: 'POST',\n      body: JSON.stringify(this.state),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => {\n      if (res.status === 200) {\n        Cookies.set('token', res.data.token);\n        Cookies.set('loggedIn', true);\n        history.push('/');\n        alert(res.data.message);\n      } else {\n        const error = new Error(res.error);\n        throw error;\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n    this.clear();\n  } //Clean form after submit\n\n\n  //Render login form\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }\n    }, \"Sign In\"), /*#__PURE__*/React.createElement(Form, {\n      name: \"normal_login\",\n      className: \"login-form\",\n      initialValues: {\n        remember: true\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Form.Item, {\n      name: \"email\",\n      rules: [{\n        required: true,\n        message: 'Please input your Email!'\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      prefix: /*#__PURE__*/React.createElement(UserOutlined, {\n        className: \"site-form-item-icon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 28\n        }\n      }),\n      type: \"text\",\n      name: \"email\",\n      placeholder: \"Email\",\n      value: this.state.email,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Form.Item, {\n      name: \"password\",\n      rules: [{\n        required: true,\n        message: 'Please input your Password!'\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      prefix: /*#__PURE__*/React.createElement(LockOutlined, {\n        className: \"site-form-item-icon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 23\n        }\n      }),\n      type: \"password\",\n      name: \"password\",\n      placeholder: \"Password\",\n      value: this.state.password,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Form.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Form.Item, {\n      name: \"remember\",\n      valuePropName: \"checked\",\n      noStyle: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 15\n      }\n    }, \"Remember me\"))), /*#__PURE__*/React.createElement(Form.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: \"primary\",\n      htmlType: \"submit\",\n      className: \"login-form-button\",\n      onClick: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }\n    }, \"Log in\"), \"Or\", /*#__PURE__*/React.createElement(Link, {\n      to: \"/register\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 15\n      }\n    }, \" register now!\"))), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"\",\n      href: \"http://localhost:5000/forgotpassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }\n    }, \"Forgot password?\"));\n  }\n\n}\n\nexport default LoginForm;","map":{"version":3,"sources":["C:/Projetos/ProjetoCasa/frontend/src/components/Login.js"],"names":["React","Component","axios","Cookies","Form","Input","Button","Checkbox","UserOutlined","LockOutlined","Link","LoginForm","constructor","props","clear","setState","email","password","state","handleChange","bind","handleSubmit","console","log","event","target","name","value","preventDefault","request","history","post","method","body","JSON","stringify","headers","then","res","status","set","data","token","push","alert","message","error","Error","catch","err","render","remember","required"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport axios from 'axios';\r\nimport '../styles/App.css';\r\nimport Cookies from 'js-cookie';\r\nimport 'antd/dist/antd.css';\r\nimport '../styles/index.css';\r\nimport { Form, Input, Button, Checkbox } from 'antd';\r\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass LoginForm extends Component {\r\n  constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        email:'',\r\n        password: ''};\r\n      this.handleChange = this.handleChange.bind(this);\r\n      this.handleSubmit = this.handleSubmit.bind(this);\r\n      console.log(this.state);\r\n    }\r\n\r\n  //Get input\r\n  handleChange(event) {\r\n    this.setState({[event.target.name]: event.target.value,\r\n    });\r\n    console.log(this.setState)\r\n  }\r\n\r\n  //Submit to log in\r\n  handleSubmit(event) {\r\n    event.preventDefault();\r\n    const request = {\r\n      email: this.state.email,\r\n      password: this.state.password\r\n    };\r\n    const history = this.props.history;\r\n    axios.post('http://localhost:3000/api/authenticate', request,  {\r\n      method: 'POST',\r\n      body: JSON.stringify(this.state),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n    .then(res => {\r\n      if (res.status === 200) {\r\n        Cookies.set('token', res.data.token)\r\n        Cookies.set('loggedIn', true);\r\n        history.push('/');\r\n        alert(res.data.message);\r\n\r\n      } else {\r\n        const error = new Error(res.error);\r\n        throw error;\r\n      }\r\n    })\r\n    .catch( err => {\r\n      console.log(err);\r\n    })\r\n    this.clear();\r\n  }\r\n\r\n  //Clean form after submit\r\n  clear = () =>{\r\n    this.setState({\r\n      email: \"\",\r\n      password: \"\" \r\n    });\r\n  }\r\n\r\n  //Render login form\r\n  render() {\r\n    return (\r\n      <div className=\"box\">\r\n        <p className=\"title\">Sign In</p>\r\n        <Form\r\n        name=\"normal_login\"\r\n        className=\"login-form\"\r\n        initialValues={{\r\n          remember: true,\r\n        }}\r\n        >\r\n          <Form.Item\r\n            name=\"email\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: 'Please input your Email!',\r\n              },\r\n            ]}\r\n          >\r\n            <Input prefix={<UserOutlined className=\"site-form-item-icon\" />} type=\"text\" name=\"email\" placeholder=\"Email\"  value={this.state.email} onChange={this.handleChange}/>\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"password\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: 'Please input your Password!',\r\n              },\r\n            ]}\r\n          >\r\n            <Input\r\n              prefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n              type=\"password\" name=\"password\"\r\n              placeholder=\"Password\" value={this.state.password} onChange={this.handleChange}/>\r\n          </Form.Item>\r\n          <Form.Item>\r\n            <Form.Item name=\"remember\" valuePropName=\"checked\" noStyle>\r\n              <Checkbox>Remember me</Checkbox>\r\n            </Form.Item>\r\n          </Form.Item>\r\n          <Form.Item>\r\n            <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\" onClick={this.handleSubmit}>\r\n              Log in\r\n            </Button>\r\n            Or<Link to=\"/register\"> register now!</Link>\r\n          </Form.Item>\r\n        </Form>\r\n        <a className=\"\" href=\"http://localhost:5000/forgotpassword\">\r\n          Forgot password?\r\n        </a>\r\n      </div>\r\n    );\r\n  };\r\n}  \r\nexport default LoginForm;\r\n\r\n"]},"metadata":{},"sourceType":"module"}